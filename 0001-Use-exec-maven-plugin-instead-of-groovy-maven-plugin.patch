From 1390c2b59fe82c4b0f76b18782e9ed28b82a71e8 Mon Sep 17 00:00:00 2001
From: Mikolaj Izdebski <mizdebsk@redhat.com>
Date: Fri, 18 Nov 2016 08:51:46 +0100
Subject: [PATCH] Use exec-maven-plugin instead of groovy-maven-plugin

---
 maven-slf4j-provider/pom.xml                         | 20 ++++++++++++--------
 .../src/main/script/patch-slf4j-simple.groovy        |  2 +-
 2 files changed, 13 insertions(+), 9 deletions(-)

diff --git a/maven-slf4j-provider/pom.xml b/maven-slf4j-provider/pom.xml
index ecb93e8..039b332 100644
--- a/maven-slf4j-provider/pom.xml
+++ b/maven-slf4j-provider/pom.xml
@@ -95,22 +95,26 @@ under the License.
         </executions>
       </plugin>
       <plugin>
-        <groupId>org.codehaus.gmaven</groupId>
-        <artifactId>groovy-maven-plugin</artifactId>
-        <version>2.0</version>
+        <groupId>org.codehaus.mojo</groupId>
+        <artifactId>exec-maven-plugin</artifactId>
+        <version>1.5.0</version>
         <executions>
           <execution>
             <id>patch-slf4j-simple</id>
             <phase>process-sources</phase>
             <goals>
-              <goal>execute</goal>
+              <goal>exec</goal>
             </goals>
-            <configuration>
-              <source>${project.basedir}/src/main/script/patch-slf4j-simple.groovy</source>
-            </configuration>
           </execution>
         </executions>
+        <configuration>
+          <executable>groovy</executable>
+          <workingDirectory>${project.basedir}</workingDirectory>
+          <arguments>
+            <argument>src/main/script/patch-slf4j-simple.groovy</argument>
+          </arguments>
+        </configuration>
       </plugin>
     </plugins>
   </build>
-</project>
\ No newline at end of file
+</project>
diff --git a/maven-slf4j-provider/src/main/script/patch-slf4j-simple.groovy b/maven-slf4j-provider/src/main/script/patch-slf4j-simple.groovy
index bba8646..a6ad10b 100644
--- a/maven-slf4j-provider/src/main/script/patch-slf4j-simple.groovy
+++ b/maven-slf4j-provider/src/main/script/patch-slf4j-simple.groovy
@@ -18,7 +18,7 @@
  * under the License.
  */
 
-dir = new File( basedir, 'target/generated-sources/slf4j-simple/org/slf4j/impl' );
+dir = new File( '.', 'target/generated-sources/slf4j-simple/org/slf4j/impl' );
 
 file = new File( dir, 'StaticLoggerBinder.java' );
 content = file.text;
-- 
2.7.4

